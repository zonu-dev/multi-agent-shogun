import type { InventoryItem, ItemDefinition } from '@/types';

export const ITEM_MASTER: ItemDefinition[] = [
  {
    id: 'xp_treatise',
    name: '兵法書・初伝',
    description: '城下町の修練値を得る古文書。即時に修練値を加算する。',
    itemType: 'consumable',
    rarity: 'rare',
    effect: {
      type: 'town_xp_boost',
      value: 120,
    },
    usable: true,
    stackable: true,
    shopCost: 180,
    purchasable: true,
  },
  {
    id: 'koban_chest',
    name: '小判箱',
    description: '軍資金を補充する補給箱。使用時に小判を獲得。',
    itemType: 'consumable',
    rarity: 'uncommon',
    effect: {
      type: 'town_gold_boost',
      value: 120,
    },
    usable: true,
    stackable: true,
    shopCost: 360,
    purchasable: true,
  },
  {
    id: 'shogun_seal',
    name: '将軍印',
    description: '所持するだけで小判獲得量+15%。',
    itemType: 'treasure',
    rarity: 'legendary',
    effect: {
      type: 'passive_bonus',
      value: 15,
      key: 'gold_gain_rate',
    },
    usable: false,
    stackable: false,
    shopCost: 400,
    purchasable: false,
  },
  {
    id: 'maneki_neko',
    name: '招き猫',
    description: '福を招く猫の像。獲得小判+5%〜+25%（Lv依存）。',
    itemType: 'decoration',
    rarity: 'uncommon',
    effect: {
      type: 'passive_bonus',
      value: 5,
      key: 'decoration_gold_bonus',
    },
    usable: false,
    stackable: false,
    shopCost: 420,
    purchasable: true,
    upgradeCosts: [240, 420, 680, 980],
  },
  {
    id: 'komainu',
    name: '狛犬',
    description: '神域の守護獣。獲得修練値+5%〜+25%（Lv依存）。',
    itemType: 'decoration',
    rarity: 'uncommon',
    effect: {
      type: 'passive_bonus',
      value: 5,
      key: 'decoration_xp_bonus',
    },
    usable: false,
    stackable: false,
    shopCost: 420,
    purchasable: true,
    upgradeCosts: [240, 420, 680, 980],
  },
  {
    id: 'stone_lantern',
    name: '石灯籠',
    description: '庭を照らす灯。素材ドロップ率+5%〜+25%（Lv依存）。',
    itemType: 'decoration',
    rarity: 'rare',
    effect: {
      type: 'passive_bonus',
      value: 5,
      key: 'decoration_drop_rate_bonus',
    },
    usable: false,
    stackable: false,
    shopCost: 650,
    purchasable: true,
    upgradeCosts: [300, 520, 820, 1200],
  },
  {
    id: 'adamantite_fragment',
    name: '黒鉄片',
    description: '鍛冶素材。細工用途で単独使用はできない。',
    itemType: 'material',
    rarity: 'rare',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 70,
    purchasable: false,
  },
  {
    id: 'cedar_lumber',
    name: '杉材',
    description: '建築・補修の基礎材。城下の建材として幅広く用いられる。',
    itemType: 'material',
    rarity: 'common',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 28,
    purchasable: true,
  },
  {
    id: 'stone_block',
    name: '石材',
    description: '土台や防備に使う切り石。重量があり備蓄向き。',
    itemType: 'material',
    rarity: 'common',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 30,
    purchasable: true,
  },
  {
    id: 'tamahagane_ingot',
    name: '玉鋼片',
    description: '武具や工具に使う鍛造素材。鍛冶仕事で重宝される。',
    itemType: 'material',
    rarity: 'uncommon',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 38,
    purchasable: true,
  },
  {
    id: 'hemp_cloth',
    name: '麻布',
    description: '装具の裏打ちや包帯にも使える汎用布素材。',
    itemType: 'material',
    rarity: 'uncommon',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 32,
    purchasable: true,
  },
  {
    id: 'sumi_ink',
    name: '松煙墨',
    description: '記録や写本に必要な墨。知識系施設での需要が高い。',
    itemType: 'material',
    rarity: 'rare',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 40,
    purchasable: true,
  },
  {
    id: 'medicinal_herb',
    name: '薬草束',
    description: '調合の下地となる乾燥薬草。治療・支援用途に使う。',
    itemType: 'material',
    rarity: 'common',
    effect: {
      type: 'passive_bonus',
      value: 0,
      key: 'craft_material',
    },
    usable: false,
    stackable: true,
    shopCost: 26,
    purchasable: true,
  },
];

export const ITEM_MASTER_SHOP_COST_BY_ID: Readonly<Record<string, number>> = Object.freeze(
  ITEM_MASTER.reduce<Record<string, number>>((acc, item) => {
    acc[item.id] = Math.max(0, Math.floor(item.shopCost));
    return acc;
  }, {})
);

export const INITIAL_INVENTORY: InventoryItem[] = [
  {
    itemId: 'xp_treatise',
    quantity: 1,
  },
  {
    itemId: 'koban_chest',
    quantity: 1,
  },
  {
    itemId: 'shogun_seal',
    quantity: 1,
  },
  {
    itemId: 'adamantite_fragment',
    quantity: 3,
  },
];
